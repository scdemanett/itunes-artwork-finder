function getSearchParameters(){var a=window.location.search.substr(1);return null!=a&&""!=a?transformToAssocArray(a):{}}function transformToAssocArray(a){for(var e={},n=a.split("&"),r=0;r<n.length;r++){var i=n[r].split("=");e[i[0]]=decodeURIComponent(i[1])}return e}function performSearch(){$("#results").html(""),$("#results").append("<h3>Searching...</h3>");var a=$("#query").val();if(!a.length)return!1;var e=$("#entity").val()?$("#entity").val():"tvSeason",n=$("#country").val()?$("#country").val():"us";$.ajax({type:"GET",crossDomain:!0,url:"api.php",data:{query:a,entity:e,country:n,type:"request"},dataType:"json"}).done(function(a){$.ajax({type:"GET",crossDomain:!0,url:a.url,data:{},dataType:"jsonp"}).done(function(a){$.ajax({type:"POST",crossDomain:!0,url:pathToAPI,data:{json:JSON.stringify(a),type:"data",entity:e},dataType:"json"}).done(function(a){if($("#results").html(""),a.error)$("#results").append("<h3>"+a.error+"</h3>");else if(a.length){for(var r=0;r<a.length;r++){var i=a[r],t='<div class="item align-self-end px-2 pb-5"><h3>'+i.title+"</h3>";"software"!=e&&"iPadSoftware"!=e&&"macSoftware"!=e?t+='<p class="mb-2"><a href="'+i.url+'" target="_blank">Standard Resolution</a> | <a href="'+i.hires+'" target="_blank">High Resolution</a> <em><small>'+i.warning+"</small></em></p>":"software"!=e&&"iPadSoftware"!=e||(t+='<p><a href="./app/?url='+encodeURIComponent(i.appstore)+"&country="+n+'" target="_blank">View screenshots / videos</a></p>'),t+='<a href="'+i.hires+'" target="_blank"><img src="'+i.url+'" alt="iTunes Artwork for \''+i.title+'\'" class="img-fluid"></a>',t+="</div>",$("#results").append(t)}imgSliderEnable()}else $("#results").append("<h3>No results found.</h3>");$("#results").append('<p class="footer">If the item you are searching for is not available on iTunes, this tool will not find it. Please do not email me asking for specific items if they are not available on iTunes! I recommend both <a href="https://sourceforge.net/projects/album-art" target="_blank">Album Art Downloader</a> and <a href="https://images.google.com" target="_blank">Google Image Search</a> as good alternative places to find artwork.</p>')})})})}var pathToAPI="api.php",countries={ae:"United Arab Emirates",ag:"Antigua and Barbuda",ai:"Anguilla",al:"Albania",am:"Armenia",ao:"Angola",ar:"Argentina",at:"Austria",au:"Australia",az:"Azerbaijan",bb:"Barbados",be:"Belgium",bf:"Burkina-Faso",bg:"Bulgaria",bh:"Bahrain",bj:"Benin",bm:"Bermuda",bn:"Brunei Darussalam",bo:"Bolivia",br:"Brazil",bs:"Bahamas",bt:"Bhutan",bw:"Botswana",by:"Belarus",bz:"Belize",ca:"Canada",cg:"Democratic Republic of the Congo",ch:"Switzerland",cl:"Chile",cn:"China",co:"Colombia",cr:"Costa Rica",cv:"Cape Verde",cy:"Cyprus",cz:"Czech Republic",de:"Germany",dk:"Denmark",dm:"Dominica",do:"Dominican Republic",dz:"Algeria",ec:"Ecuador",ee:"Estonia",eg:"Egypt",es:"Spain",fi:"Finland",fj:"Fiji",fm:"Federated States of Micronesia",fr:"France",gb:"United Kingdom",gd:"Grenada",gh:"Ghana",gm:"Gambia",gr:"Greece",gt:"Guatemala",gw:"Guinea Bissau",gy:"Guyana",hk:"Hong Kong",hn:"Honduras",hr:"Croatia",hu:"Hungary",id:"Indonesia",ie:"Ireland",il:"Israel",in:"India",is:"Iceland",it:"Italy",jm:"Jamaica",jo:"Jordan",jp:"Japan",ke:"Kenya",kg:"Krygyzstan",kh:"Cambodia",kn:"Saint Kitts and Nevis",kr:"South Korea",kw:"Kuwait",ky:"Cayman Islands",kz:"Kazakhstan",la:"Laos",lb:"Lebanon",lc:"Saint Lucia",lk:"Sri Lanka",lr:"Liberia",lt:"Lithuania",lu:"Luxembourg",lv:"Latvia",md:"Moldova",mg:"Madagascar",mk:"Macedonia",ml:"Mali",mn:"Mongolia",mo:"Macau",mr:"Mauritania",ms:"Montserrat",mt:"Malta",mu:"Mauritius",mw:"Malawi",mx:"Mexico",my:"Malaysia",mz:"Mozambique",na:"Namibia",ne:"Niger",ng:"Nigeria",ni:"Nicaragua",nl:"Netherlands",np:"Nepal",no:"Norway",nz:"New Zealand",om:"Oman",pa:"Panama",pe:"Peru",pg:"Papua New Guinea",ph:"Philippines",pk:"Pakistan",pl:"Poland",pt:"Portugal",pw:"Palau",py:"Paraguay",qa:"Qatar",ro:"Romania",ru:"Russia",sa:"Saudi Arabia",sb:"Soloman Islands",sc:"Seychelles",se:"Sweden",sg:"Singapore",si:"Slovenia",sk:"Slovakia",sl:"Sierra Leone",sn:"Senegal",sr:"Suriname",st:"Sao Tome e Principe",sv:"El Salvador",sz:"Swaziland",tc:"Turks and Caicos Islands",td:"Chad",th:"Thailand",tj:"Tajikistan",tm:"Turkmenistan",tn:"Tunisia",tr:"Turkey",tt:"Republic of Trinidad and Tobago",tw:"Taiwan",tz:"Tanzania",ua:"Ukraine",ug:"Uganda",us:"United States of America",uy:"Uruguay",uz:"Uzbekistan",vc:"Saint Vincent and the Grenadines",ve:"Venezuela",vg:"British Virgin Islands",vn:"Vietnam",ye:"Yemen",za:"South Africa",zw:"Zimbabwe"};$(document).ready(function(){var a=[];for(var e in countries)a.push([e,countries[e]]);a.sort(function(a,e){return a[1]<e[1]?1:a[1]>e[1]?-1:0});for(var n=a.length-1;n>=0;n--){var r=a[n];$("#country").append('<option value="'+r[0]+'">'+r[1]+"</option>")}var i=getSearchParameters();i.entity&&i.query&&i.country&&($("#query").val(i.query),$("#entity").val(i.entity),$("#country").val(i.country),performSearch()),$("#iTunesSearch").submit(function(){return performSearch(),!1})});