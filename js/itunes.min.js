var pathToAPI="api.php",countries={ae:"United Arab Emirates",ag:"Antigua and Barbuda",ai:"Anguilla",al:"Albania",am:"Armenia",ao:"Angola",ar:"Argentina",at:"Austria",au:"Australia",az:"Azerbaijan",bb:"Barbados",be:"Belgium",bf:"Burkina-Faso",bg:"Bulgaria",bh:"Bahrain",bj:"Benin",bm:"Bermuda",bn:"Brunei Darussalam",bo:"Bolivia",br:"Brazil",bs:"Bahamas",bt:"Bhutan",bw:"Botswana",by:"Belarus",bz:"Belize",ca:"Canada",cg:"Democratic Republic of the Congo",ch:"Switzerland",cl:"Chile",cn:"China",co:"Colombia",cr:"Costa Rica",cv:"Cape Verde",cy:"Cyprus",cz:"Czech Republic",de:"Germany",dk:"Denmark",dm:"Dominica",do:"Dominican Republic",dz:"Algeria",ec:"Ecuador",ee:"Estonia",eg:"Egypt",es:"Spain",fi:"Finland",fj:"Fiji",fm:"Federated States of Micronesia",fr:"France",gb:"United Kingdom",gd:"Grenada",gh:"Ghana",gm:"Gambia",gr:"Greece",gt:"Guatemala",gw:"Guinea Bissau",gy:"Guyana",hk:"Hong Kong",hn:"Honduras",hr:"Croatia",hu:"Hungary",id:"Indonesia",ie:"Ireland",il:"Israel",in:"India",is:"Iceland",it:"Italy",jm:"Jamaica",jo:"Jordan",jp:"Japan",ke:"Kenya",kg:"Krygyzstan",kh:"Cambodia",kn:"Saint Kitts and Nevis",kr:"South Korea",kw:"Kuwait",ky:"Cayman Islands",kz:"Kazakhstan",la:"Laos",lb:"Lebanon",lc:"Saint Lucia",lk:"Sri Lanka",lr:"Liberia",lt:"Lithuania",lu:"Luxembourg",lv:"Latvia",md:"Moldova",mg:"Madagascar",mk:"Macedonia",ml:"Mali",mn:"Mongolia",mo:"Macau",mr:"Mauritania",ms:"Montserrat",mt:"Malta",mu:"Mauritius",mw:"Malawi",mx:"Mexico",my:"Malaysia",mz:"Mozambique",na:"Namibia",ne:"Niger",ng:"Nigeria",ni:"Nicaragua",nl:"Netherlands",np:"Nepal",no:"Norway",nz:"New Zealand",om:"Oman",pa:"Panama",pe:"Peru",pg:"Papua New Guinea",ph:"Philippines",pk:"Pakistan",pl:"Poland",pt:"Portugal",pw:"Palau",py:"Paraguay",qa:"Qatar",ro:"Romania",ru:"Russia",sa:"Saudi Arabia",sb:"Soloman Islands",sc:"Seychelles",se:"Sweden",sg:"Singapore",si:"Slovenia",sk:"Slovakia",sl:"Sierra Leone",sn:"Senegal",sr:"Suriname",st:"Sao Tome e Principe",sv:"El Salvador",sz:"Swaziland",tc:"Turks and Caicos Islands",td:"Chad",th:"Thailand",tj:"Tajikistan",tm:"Turkmenistan",tn:"Tunisia",tr:"Turkey",tt:"Republic of Trinidad and Tobago",tw:"Taiwan",tz:"Tanzania",ua:"Ukraine",ug:"Uganda",us:"United States of America",uy:"Uruguay",uz:"Uzbekistan",vc:"Saint Vincent and the Grenadines",ve:"Venezuela",vg:"British Virgin Islands",vn:"Vietnam",ye:"Yemen",za:"South Africa",zw:"Zimbabwe"};function updateUrlWithParams(entity,query,country){var newUrl=`${window.location.protocol}//${window.location.host}${window.location.pathname}?entity=${encodeURIComponent(entity)}&query=${encodeURIComponent(query)}&country=${encodeURIComponent(country)}`;window.history.pushState({path:newUrl},"",newUrl)}function downloadImage(imageUrl,imageName){fetch(imageUrl,{mode:"cors",credentials:"same-origin"}).then(response=>response.blob()).then(blob=>{const blobUrl=URL.createObjectURL(blob),downloadLink=document.createElement("a");downloadLink.href=blobUrl,downloadLink.download=imageName,document.body.appendChild(downloadLink),downloadLink.click(),document.body.removeChild(downloadLink),URL.revokeObjectURL(blobUrl)}).catch(error=>console.error("Download failed:",error))}function getSearchParameters(){var prmstr=window.location.search.substr(1);return null!=prmstr&&""!=prmstr?transformToAssocArray(prmstr):{}}function transformToAssocArray(prmstr){for(var params={},prmarr=prmstr.split("&"),i=0;i<prmarr.length;i++){var tmparr=prmarr[i].split("=");params[tmparr[0]]=decodeURIComponent(tmparr[1])}return params}function performSearch(){var $results=$("#results");$results.html(""),$results.append("<h3>Searching...</h3>");var query=$("#query").val();if(!query.length)return!1;var entity=$("#entity").val()?$("#entity").val():"tvSeason",country=$("#country").val()?$("#country").val():"us";$.ajax({type:"GET",crossDomain:!0,url:pathToAPI,data:{query:query,entity:entity,country:country,type:"request"},dataType:"json"}).done((function(data){$.ajax({type:"GET",crossDomain:!0,url:data.url,data:{},dataType:"jsonp"}).done((function(data){$.ajax({type:"POST",crossDomain:!0,url:pathToAPI,data:{json:JSON.stringify(data),type:"data",entity:entity},dataType:"json"}).done((function(data){if($results.html(""),data.error)$results.addClass("d-flex justify-content-center flex-wrap"),$results.append(`<h3>${data.error}</h3>`);else if(data.length){for(var i=0;i<data.length;i++){var result=data[i],html=`<div class="item align-self-end px-2 pb-5"><h3>${result.title}</h3>`;if("software"!=entity&&"iPadSoftware"!=entity&&"macSoftware"!=entity){var uncompressed=result.uncompressed?`<a href="${result.uncompressed}" target="_blank">Uncompressed High Resolution</a>`:`<a href="${result.hires}" target="_blank">High Resolution</a>`;html+=`<p class="mb-2"><a href="${result.url}" target="_blank">Standard Resolution</a> | ${uncompressed}</p>`}else"software"!=entity&&"iPadSoftware"!=entity||(html+=`<p><a href="${result.appstore}&country=${country}" target="_blank">View screenshots / videos</a></p>`);html+=`<a href="${result.uncompressed?result.uncompressed:result.hires}" target="_blank" title="iTunes Artwork for '${result.title}'" onclick="event.preventDefault(); downloadImage('${result.uncompressed?result.uncompressed:result.hires}', '${result.title.replace(/'/g,"\\'")} - Front (Hi-Res)')" class="d-block"><img src="${result.url}" alt="iTunes Artwork for '${result.title}'" class="img-fluid"></a>`,html+="</div>",$results.append(html)}imgSliderEnable()}else $results.append("<h3>No results found.</h3>");$results.append('<p class="footer">If the item you are searching for is not available on iTunes, this tool will not find it. Please do not email me asking for specific items if they are not available on iTunes! I recommend both <a href="https://sourceforge.net/projects/album-art" target="_blank">Album Art Downloader</a> and <a href="https://images.google.com" target="_blank">Google Image Search</a> as good alternative places to find artwork.</p>')}))}))}))}$(document).ready((function(){var sortable=[];for(var key in countries)sortable.push([key,countries[key]]);sortable.sort((function(a,b){return a[1]<b[1]?1:a[1]>b[1]?-1:0}));for(var i=sortable.length-1;i>=0;i--){var array=sortable[i];$("#country").append(`<option value="${array[0]}">${array[1]}</option>`)}var params=getSearchParameters();params.entity&&params.query&&params.country&&($("#entity").val(params.entity),$("#query").val(params.query),$("#country").val(params.country),performSearch()),$("#iTunesSearch").submit((function(){var entity=$("#entity").val()||"tvSeason",query=$("#query").val(),country=$("#country").val()||"us";return query.length?(performSearch(),updateUrlWithParams(entity,query,country),!1):(alert("Please enter a search query."),!1)})),$("#reset").click((function(event){event.preventDefault(),$("#iTunesSearchForm").get(0).reset(),window.location.href=window.location.origin+window.location.pathname}))}));
//# sourceMappingURL=itunes.min.js.map